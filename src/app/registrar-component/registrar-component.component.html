<div class="page-center">
  <div class="register-container">
    <h2>Registrar Cuenta</h2>

    <form (ngSubmit)="registrar()">

      <!-- USUARIO -->
      <div class="form-group">
        <label for="usuario">Usuario</label>
        <input id="usuario" type="text" [(ngModel)]="usuario" name="usuario"
               placeholder="Ingresa tu usuario" required>
      </div>

      <!-- CONTRASEÑA -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <div class="password-wrapper">
          <input id="password"
                 [type]="verPassword ? 'text' : 'password'"
                 [(ngModel)]="password"
                 name="password" required
                 (input)="validarPassword()">

          <button type="button" class="toggle-btn" (click)="verPassword = !verPassword">
            {{ verPassword ? 'Ocultar' : 'Ver' }}
          </button>
        </div>

        <!-- VALIDACIONES VISIBLES -->
        <p class="error" *ngIf="password && !validaLongitud">
          Debe tener al menos 8 caracteres.
        </p>

        <p class="error" *ngIf="password && !validaMayuscula">
          Debe incluir una letra mayúscula.
        </p>

        <p class="error" *ngIf="password && !validaMinuscula">
          Debe incluir una letra minúscula.
        </p>

        <p class="error" *ngIf="password && !validaNumero">
          Debe incluir un número.
        </p>

        <p class="error" *ngIf="password && !validaEspecial">
          Debe incluir un carácter especial (!&#64;#$%^&*.-).
        </p>
      </div>

      <!-- CONFIRMAR CONTRASEÑA -->
      <div class="form-group">
        <label for="confirm-password">Confirmar contraseña</label>

        <div class="password-wrapper">
          <input id="confirm-password"
                 [type]="verPassword2 ? 'text' : 'password'"
                 [(ngModel)]="confirmPassword"
                 name="confirmPassword" required>

          <button type="button" class="toggle-btn" (click)="verPassword2 = !verPassword2">
            {{ verPassword2 ? 'Ocultar' : 'Ver' }}
          </button>
        </div>

        <p class="error" *ngIf="confirmPassword && password !== confirmPassword">
          Las contraseñas no coinciden.
        </p>
      </div>

      <!-- BOTÓN -->
      <button type="submit" class="btn-registrar" [disabled]="!formValido">
        Registrar
      </button>

      <!-- MENSAJE DE ÉXITO -->
      <p class="success" *ngIf="mensajeExito">
        Cuenta creada correctamente. Redirigiendo...
      </p>

    </form>
  </div>
</div>
